# SPDX-License-Identifier: GPL-2.0-only OR BSD-2-Clause
%YAML 1.2
---
$id: http://devicetree.org/schemas/net/sff,sfp.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: Small Form Factor (SFF) Committee Small Form-factor Pluggable (SFP) Transceiver

maintainers:
  - Robert Marko <robimarko@gmail.com>

properties:
  compatible:
    enum:
      # for SFP modules
      - sff,sfp
      # for soldered down SFF modules
      - sff,sff

  i2c-bus:
    description: phandle of an I2C bus controller for the SFP two wire serial interface
    $ref: /schemas/types.yaml#/definitions/phandle

  mod-def0-gpios:
    maxItems: 1
    description:
      GPIO phandle and a specifier of the MOD-DEF0 (AKA Mod_ABS)
      module presence input gpio signal, active (module absent) high.
      Must not be present for SFF modules.

  los-gpios:
    maxItems: 1
    description:
      GPIO phandle and a specifier of the Receiver Loss of Signal
      Indication input gpio signal, active (signal lost) high.

  tx-fault-gpios:
    maxItems: 1
    description:
      GPIO phandle and a specifier of the Module Transmitter
      Fault input gpio signal, active (fault condition) high.

  tx-disable-gpios:
    maxItems: 1
    description:
      GPIO phandle and a specifier of the Transmitter Disable
      output gpio signal, active (Tx disable) high.

  rate-select0-gpios:
    maxItems: 1
    description:
      GPIO phandle and a specifier of the Rx Signaling Rate
      Select (AKA RS0) output gpio signal, low (low) Rx rate, high (high) Rx rate.
      Must not be present for SFF modules.

  rate-select1-gpios:
    maxItems: 1
    description:
      GPIO phandle and a specifier of the Tx Signaling Rate
      Select (AKA RS1) output gpio signal (SFP+ only), low (low) Tx rate, high (high) Tx rate.
      Must not be present for SFF modules.

  maximum-power-milliwatt:
    description:
      Maximum module power consumption.
      Specifies the maximum power consumption allowable by a module in the slot, in milli-Watts.
    $ref: /schemas/types.yaml#/definitions/uint32

required:
  - compatible
  - i2c-bus

unevaluatedProperties: false

examples:
  - |
    #include <dt-bindings/gpio/gpio.h>
    sfp_eth3: sfp-eth3 {
      compatible = "sff,sfp";
      i2c-bus = <&sfp_1g_i2c>;
      los-gpios = <&cpm_gpio2 22 GPIO_ACTIVE_HIGH>;
      mod-def0-gpios = <&cpm_gpio2 21 GPIO_ACTIVE_LOW>;
      tx-disable-gpios = <&cps_gpio1 24 GPIO_ACTIVE_HIGH>;
      tx-fault-gpios = <&cpm_gpio2 19 GPIO_ACTIVE_HIGH>;
      maximum-power-milliwatt = <1000>;
    };
...
